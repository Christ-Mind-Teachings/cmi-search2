function wom(result, book, info) {
  switch(book) {
    case "woh":
      if (!result.woh) {
        result.woh = [];
      }
      result.woh.push(info);
      break;
    case "wot":
      if (!result.wot) {
        result.wot = [];
      }
      result.wot.push(info);
      break;
    case "wok":
      if (!result.wok) {
        result.wok = [];
      }
      result.wok.push(info);
      break;
    case "tjl":
      if (!result.tjl) {
        result.tjl = [];
      }
      result.tjl.push(info);
      break;
    case "wos":
      if (!result.wos) {
        result.wos = [];
      }
      result.wos.push(info);
      break;
    case "early":
      if (!result.early) {
        result.early = [];
      }
      result.early.push(info);
      break;
    default:
      if (!result.unknown) {
        result.unknown = [];
      }
      result.unknown.push(info);
      break;
  }
}

function col(result, book, info) {
  switch(book) {
    case "book1":
      if (!result.book1) {
        result.book1 = [];
      }
      result.book1.push(info);
      break;
    case "book2":
      if (!result.book2) {
        result.book2 = [];
      }
      result.book2.push(info);
      break;
    case "book3":
      if (!result.book3) {
        result.book3 = [];
      }
      result.book3.push(info);
      break;
    case "book4":
      if (!result.book4) {
        result.book4 = [];
      }
      result.book4.push(info);
      break;
    case "book5":
      if (!result.book5) {
        result.book5 = [];
      }
      result.book5.push(info);
      break;
    case "book6":
      if (!result.book6) {
        result.book6 = [];
      }
      result.book6.push(info);
      break;
    case "book7":
      if (!result.book7) {
        result.book7 = [];
      }
      result.book7.push(info);
      break;
    default:
      if (!result.unknown) {
        result.unknown = [];
      }
      result.unknown.push(info);
      break;
  }
}

function ftcm(result, book, info) {
  switch(book) {
    case "book1":
      if (!result.book1) {
        result.book1 = [];
      }
      result.book1.push(info);
      break;
    case "book2":
      if (!result.book2) {
        result.book2 = [];
      }
      result.book2.push(info);
      break;
    default:
      if (!result.unknown) {
        result.unknown = [];
      }
      result.unknown.push(info);
      break;
  }
}

function raj(result, book, info) {
  switch(book) {
    case "yaa":
      if (!result.yaa) {
        result.yaa = [];
      }
      result.yaa.push(info);
      break;
    case "grad":
      if (!result.grad) {
        result.grad = [];
      }
      result.grad.push(info);
      break;
    case "sg2002":
      if (!result.sg2002) {
        result.sg2002 = [];
      }
      result.sg2002.push(info);
      break;
    case "sg2003":
      if (!result.sg2003) {
        result.sg2003 = [];
      }
      result.sg2003.push(info);
      break;
    case "sg2004":
      if (!result.sg2004) {
        result.sg2004 = [];
      }
      result.sg2004.push(info);
      break;
    case "sg2005":
      if (!result.sg2005) {
        result.sg2005 = [];
      }
      result.sg2005.push(info);
      break;
    case "sg2006":
      if (!result.sg2006) {
        result.sg2006 = [];
      }
      result.sg2006.push(info);
      break;
    case "sg2007":
      if (!result.sg2007) {
        result.sg2007 = [];
      }
      result.sg2007.push(info);
      break;
    case "sg2008":
      if (!result.sg2008) {
        result.sg2008 = [];
      }
      result.sg2008.push(info);
      break;
    case "sg2009":
      if (!result.sg2009) {
        result.sg2009 = [];
      }
      result.sg2009.push(info);
      break;
    case "sg2010":
      if (!result.sg2010) {
        result.sg2010 = [];
      }
      result.sg2010.push(info);
      break;
    case "sg2011":
      if (!result.sg2011) {
        result.sg2011 = [];
      }
      result.sg2011.push(info);
      break;
    case "sg2012":
      if (!result.sg2012) {
        result.sg2012 = [];
      }
      result.sg2012.push(info);
      break;
    case "sg2013":
      if (!result.sg2013) {
        result.sg2013 = [];
      }
      result.sg2013.push(info);
      break;
    case "sg2014":
      if (!result.sg2014) {
        result.sg2014 = [];
      }
      result.sg2014.push(info);
      break;
    case "sg2015":
      if (!result.sg2015) {
        result.sg2015 = [];
      }
      result.sg2015.push(info);
      break;
    case "sg2016":
      if (!result.sg2016) {
        result.sg2016 = [];
      }
      result.sg2016.push(info);
      break;
    case "sg2017":
      if (!result.sg2017) {
        result.sg2017 = [];
      }
      result.sg2017.push(info);
      break;
    case "sg2018":
      if (!result.sg2018) {
        result.sg2018 = [];
      }
      result.sg2018.push(info);
      break;
    default:
      if (!result.unknown) {
        result.unknown = [];
      }
      result.unknown.push(info);
      break;
  }
}

function pwom(result, book, info) {
  switch(book) {
    case "woh":
      if (!result.woh) {
        result.woh = [];
      }
      result.woh.push(info);
      break;
    case "wot":
      if (!result.wot) {
        result.wot = [];
      }
      result.wot.push(info);
      break;
    case "wok":
      if (!result.wok) {
        result.wok = [];
      }
      result.wok.push(info);
      break;
    case "lj":
      if (!result.lj) {
        result.lj = [];
      }
      result.lj.push(info);
      break;
    case "wos":
      if (!result.wos) {
        result.wos = [];
      }
      result.wos.push(info);
      break;
    case "early":
      if (!result.early) {
        result.early = [];
      }
      result.early.push(info);
      break;
    default:
      if (!result.unknown) {
        result.unknown = [];
      }
      result.unknown.push(info);
      break;
  }
}

// the chapter portion of the parakey for unrestricted chapters
const course = [3,4,5,6,7,8,11,14,16,20,21,22,28];
const treatise = [2,13,14,17,27,44,46,57];
const dialog = [1,3,7,27];

/*
 * Returns true for restricted chapters, false otherwise
 *
 * args: key
 *
 * 'key' is the items parakey. The chapter portion of the key is converted into a number
 * and checked with the corresponding unrestricted chapter array. If found false is 
 * returned to indicate the item is not restricted. True is returned otherwise.
 */
function isRestricted(book, key) {

  //console.log("isRestricted book: %s, key: %s", book, key);

  let chapter = parseInt(key.substring(5,7),10);
  let unrestricted;

  switch(book) {
    case "course":
      unrestricted = course;
      break;
    case "treatise":
      unrestricted = treatise;
      break;
    case "dialog":
      unrestricted = dialog;
      break;
    default:
      console.log("isRestricted() invalid book: %s", book);
      return true;
  }

  if (unrestricted.includes(chapter)) {
    return false; //not restricted
  }
  else {
    return true; //restricted
  }
}

function acol(result, book, info, authorized) {
  //if user not authorized to search restricted content check if item is restricted
  //and return without returning the item
  if (!authorized && isRestricted(book, info.key)) {
    result.restricted++;
    return;
  }

  switch(book) {
    case "course":
      if (!result.course) {
        result.course = [];
      }
      result.course.push(info);
      break;
    case "treatise":
      if (!result.treatise) {
        result.treatise = [];
      }
      result.treatise.push(info);
      break;
    case "dialog":
      if (!result.dialog) {
        result.dialog = [];
      }
      result.dialog.push(info);
      break;
    default:
      if (!result.unknown) {
        result.unknown = [];
      }
      result.unknown.push(info);
      break;
  }
}

function acimoe(result, book, info) {
  switch(book) {
    case "text":
      if (!result.text) {
        result.text = [];
      }
      result.text.push(info);
      break;
    case "workbook":
      if (!result.workbook) {
        result.workbook = [];
      }
      result.workbook.push(info);
      break;
    case "manual":
      if (!result.manual) {
        result.manual = [];
      }
      result.manual.push(info);
      break;
    default:
      if (!result.unknown) {
        result.unknown = [];
      }
      result.unknown.push(info);
      break;
  }
}

function acim(result, book, info) {
  switch(book) {
    case "preface":
      if (!result.preface) {
        result.preface = [];
      }
      result.preface.push(info);
      break;
    case "text":
      if (!result.text) {
        result.text = [];
      }
      result.text.push(info);
      break;
    case "workbook":
      if (!result.workbook) {
        result.workbook = [];
      }
      result.workbook.push(info);
      break;
    case "manual":
      if (!result.manual) {
        result.manual = [];
      }
      result.manual.push(info);
      break;
    default:
      if (!result.unknown) {
        result.unknown = [];
      }
      result.unknown.push(info);
      break;
  }
}

module.exports = {
  acim: acim,
  acimoe: acimoe,
  acol: acol,
  pwom: pwom,
  raj: raj,
  wom: wom,
  col: col,
  ftcm: ftcm
};

